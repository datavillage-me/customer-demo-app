<div>
    <h2><b>Consents</b></h2>
    </div>
<hr/>
<div class="container">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12" class="row justify-content-center">
            <div class="card text-left" style="width: 100%;">
                <div class="card-body">
                    <h2 >Create consent receipt</h2>
                    <p class="card-text ">
                        <div id="errorMessage">{{errors}}</div>
                        <form method="POST" id="consentReceiptForm" action="/auth/consents/create">
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="consentReceiptName">Name</label>
                                        <input type="text" class="form-control" id="consentReceiptName" name="consentReceiptName" >
                                        <span class="badge badge-default">String</span> <small>Name of the consent receipt to create.</small>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <label for="consentReceiptDescription">Description</label>
                                        <input type="text" class="form-control" id="consentReceiptDescription" name="consentReceiptDescription" >
                                        <span class="badge badge-default">String</span> <small>Description of the consent receipt to create.</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="consentReceiptForPurpose">Purpose</label>
                                        <textarea class="form-control" id="consentReceiptForPurpose"  name="consentReceiptForPurpose" rows="2"></textarea>
                                        <span class="badge badge-default">String</span> <small>Purpose of the personal data processing.</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="consentReceiptForProcessing">For processing</label>
                                            <div>
                                            <select id="consentReceiptForProcessing" name="consentReceiptForProcessing"  class="form-control" data-live-search="true">
                                                <option value="https://w3id.org/GConsent#DataAdaptation">DataAdaptation</option>
                                                <option value="https://w3id.org/GConsent#DataAlignment">DataAlignment</option>
                                                <option value="https://w3id.org/GConsent#DataAlteration">DataAlteration</option>
                                                <option value="https://w3id.org/GConsent#DataCollection">DataCollection</option>
                                                <option value="https://w3id.org/GConsent#DataCombination">DataCombination</option>
                                                <option value="https://w3id.org/GConsent#DataConsultation" selected="true">DataConsultation (Default)</option>
                                                <option value="https://w3id.org/GConsent#DataDestruction">DataDestruction</option>
                                                <option value="https://w3id.org/GConsent#DataDisclosureByTransmission">DataDisclosureByTransmission</option>
                                                <option value="https://w3id.org/GConsent#DataDissemination">DataDissemination</option>
                                                <option value="https://w3id.org/GConsent#DataErasure">DataErasure</option>
                                                <option value="https://w3id.org/GConsent#DataOrganisation">DataOrganisation</option>
                                                <option value="https://w3id.org/GConsent#DataRecording">DataRecording</option>
                                                <option value="https://w3id.org/GConsent#DataRestriction">DataRestriction</option>
                                                <option value="https://w3id.org/GConsent#DataRetrieval">DataRetrieval</option>
                                                <option value="https://w3id.org/GConsent#DataSharing">DataSharing</option>
                                                <option value="https://w3id.org/GConsent#DataStorage">DataStorage</option>
                                                <option value="https://w3id.org/GConsent#DataStructuring">DataStructuring</option>
                                            </select>
                                         </div>
                                        <span class="badge badge-default">String</span> <small>Type of processing (actions or activities) performed on personal data</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="consentReceiptRequiredValidStatus">Required valid status</label>
                                            <div>
                                            <select id="consentReceiptRequiredValidStatus" name="consentReceiptRequiredValidStatus"  class="form-control" data-live-search="true">
                                                <option value="https://w3id.org/GConsent#ConsentStatusExplicitlyGiven" selected="true">Explicit (Default)</option>
                                                <option value="https://w3id.org/GConsent#ConsentStatusImplicitlyGiven">Implicit (Not supported yet)</option>
                                            </select>
                                         </div>
                                        <span class="badge badge-default">String</span> <small>Type of required status to make valid consent</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="consentReceiptData">For personal data</label>
                                        <div class="row">
                                            <div class="col">
                                                <div>
                                                    <select id="consentReceiptDataSensitivity"  name="consentReceiptDataSensitivity" class="form-control">
                                                        <option value="https://w3id.org/GDPRtEXT#PersonalData" selected="true">Personal Data (Default)</option>
                                                        <option value="https://w3id.org/GDPRtEXT#HealthData">Sensitive Personal Data - Health Data</option>
                                                        <option value="https://w3id.org/GDPRtEXT#GeneticData">Sensitive Personal Data - Genetic Data</option>
                                                        <option value="https://w3id.org/GDPRtEXT#CriminalData">Sensitive Personal Data - Criminal Data</option>
                                                        <option value="https://w3id.org/GDPRtEXT#RacialData">Sensitive Personal Data - Racial Data</option>
                                                    </select>
                                                </div>
                                                <span class="badge badge-default">Array</span> <small>Set of personal data sensitivity</small>
                                            </div>
                                            <div class="col">
                                                <div>
                                                    <select id="consentReceiptDataCategories"  name="consentReceiptDataCategories" class="form-control selectpicker" multiple="multiple">
                                                        <option value="https://www.datavillage.me/ontologies/LConsent#PersonalDataActivity">PersonalDataActivity - What?</option>
                                                        <option value="https://www.datavillage.me/ontologies/LConsent#PersonalDataLocation">PersonalDataLocation - Where?</option>
                                                        <option value="https://www.datavillage.me/ontologies/LConsent#PersonalDataTime">PersonalDataTime - When?</option>
                                                        <option value="https://www.datavillage.me/ontologies/LConsent#PersonalDataPerson">PersonalDataPerson - With Whom?</option>
                                                        <option value="https://www.datavillage.me/ontologies/LConsent#PersonalDataCharacteristic">PersonalDataCharacteristic - How?</option>
                                                    </select>
                                                </div>
                                                <span class="badge badge-default">Array</span> <small>Set of personal data categories</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>  
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="consentReceiptDataSources">Data sources</label>
                                            <div>
                                            <select id="consentReceiptDataSources"  name="consentReceiptDataSources" class="form-control selectpicker" multiple="multiple">
                                                <optgroup label="Sports & health">
                                                        <option value="20f2fc315a06ed54663bdfd5efa4a51234b27fd4d4690bd58d0944120bcd31d08d28ae5891ba9243c91f5eab608d5d364c1681e2bf0d9e30c25822d8350c5a5d">Strava (Available for sensitivity: "PersonalData" - category: "What | When")</option>
                                                </optgroup>
                                                <optgroup label="Social & interests">
                                                        <option value="4f6c4a9045ae3fdc7c457a6998a2ec538c87cfadd52529eccfc3f81676eca9b9130e0c3e3cdbf5d47cc0114ac3b4e248d74e2c5d8ef6d8aa79a8fddfc4bb4098">Facebook (Available for sensitivity: "PersonalData" - category: "What | When")</option>
                                                </optgroup>
                                            </select>
                                        </div>
                                        <span class="badge badge-default">Array</span> <small>List of data sources used by processing (Fitbit, Colruyt, N26, Instagram, Vimeo, Spotify, GetPocket, Twitter are coming soon).</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="createdByName">Created by</label>
                                        <div class="row">
                                            <div class="col">
                                                <input type="text" class="form-control" id="consentReceiptCreatorName" name="consentReceiptCreatorName" value="{{#if session.companyName}}{{session.companyName}}{{/if}}" >
                                                <span class="badge badge-default">String</span> <small>Name of the organisation</small>
                                            </div>
                                            <div class="col">
                                                <input type="text" class="form-control" id="consentReceiptCreatorUrl" name="consentReceiptCreatorUrl" value="{{#if session.companyUri}}{{session.companyUri}}{{/if}}" >
                                                <span class="badge badge-default">String</span> <small>URI of the organisation</small>
                                            </div>
                                            <div class="col">
                                                <input type="text" class="form-control" id="consentReceiptCreatorLogo" name="consentReceiptCreatorLogo" value="{{#if session.companyUri}}{{session.companyUri}}/logo.png{{/if}}" >
                                                <span class="badge badge-default">String</span> <small>URL to the Logo of the organisation</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/><br/>
                            <center><button type="button" class="btn btn-primary" onclick="submitForm('consentReceiptForm');">Create consent receipt</button></center>
                        </form>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function showError(errorMessage){
        var htmlErrorMessage="<div class='alert alert-warning'><div class='container-fluid'><i class='material-icons'>warning</i> "+errorMessage+"</div></div>";
        document.getElementById("errorMessage").innerHTML=htmlErrorMessage;
    }
    function submitForm(form){
        if(document.getElementById("consentReceiptName").value=="")
            showError("Name is required");
        else if(document.getElementById("consentReceiptDescription").value=="")
            showError("Description is required");
        else if(document.getElementById("consentReceiptDescription").value=="")
            showError("Description is required");
        else if(document.getElementById("consentReceiptForPurpose").value=="")
            showError("Purpose is required");
        else if(document.getElementById("consentReceiptForProcessing").value=="")
            showError("Processing is required");
        else if(document.getElementById("consentReceiptDataSensitivity").value=="")
            showError("Data sensitivity is required");
        else if(document.getElementById("consentReceiptDataCategories").value=="")
            showError("Data categories is required");
        else if(document.getElementById("consentReceiptDataSources").value=="")
            showError("Data sources is required");
        else if(document.getElementById("consentReceiptCreatorName").value=="")
            showError("Creator name is required");
        else if(document.getElementById("consentReceiptCreatorUrl").value=="")
            showError("Creator url is required");
        else if(document.getElementById("consentReceiptCreatorLogo").value=="")
            showError("Creator logo is required");
        else
            document.getElementById(form).submit();
    }
    $(document).ready(function() {  
        //$('select[consentReceiptForPurpose]').val('https://w3id.org/GConsent#DataConsultation');
        //$('select[consentReceiptForPurpose]').selectpicker('refresh');
    });
    
</script>


