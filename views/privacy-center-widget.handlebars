<div class="container">
    <div class="row">
        <div class="col-lg-2 col-md-2 col-sm-2"></div>
        <div class="col-lg-8 col-md-8 col-sm-8" class="row justify-content-center">
            <center>
                <h3><i class="material-icons-outlined" style="font-size:48px">verified_user</i><br/>Privacy center</h3>
                Review key settings &amp; the data <b>{{session.companyName}}</b> uses to personalize your experience.
            </center>
            <div class="card" >
                <div class="card-body">
                    <h3>{{consentReceipt.name}}</h3>
                    <h5>{{consentReceipt.purpose}}</h5>
                    <hr/>
                    <center>
                        <div id="graph"></div>
                    </center>
                    <br/>
                    <h5>To be able to {{consentReceipt.description}}, we will use your </h5>
                    <ul>
                    {{#each dataSources.sources}}
                    <li><h5><b>{{this.name}}</b></h5></li>
                    {{/each}}
                    </ul>
                    <div class="row">
                        <div class="col-lg-1 align-self-center"><i class="material-icons-outlined" style="font-size:32px">verified_user</i></div>
                        <div class="col-lg-11 align-self-center"><i>All your personal data is under your control. {{session.companyName}} can only process your data with your explicit consent. We never obtain and store this data on our systems and it will never be used for purposes other than those agreed here. </i></div>
                    </div>
                    <hr/>
                    <center>
                    {{#ifConsentActif consents consentReceipt.id}}
                        <a href="{{actionActivateConsent}}" class="btn btn-primary">I want to revoke "{{consentReceipt.name}}"</a>
                    {{else}}
                        <img style="width:48px" src="/img/logo.png"/><a href="{{actionActivateConsent}}" class="btn btn-primary">Authorize with Datavillage</a>
                    {{/ifConsentActif}}
                    </center>
                    
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function activateDataSource(element,consentReceiptId){
        if(element.checked){
            document.getElementById(consentReceiptId).submit();
        }
    }

    function init() {
                var neo4jd3 = new Neo4jd3('#graph', {
                    highlight: [
                        {
                            class: 'Project',
                            property: 'name',
                            value: 'neo4jd3'
                        }, {
                            class: 'User',
                            property: 'userId',
                            value: 'person'
                        }
                    ],
                    icons: {
                        'User': 'user',
                    },
                    images: {
                        {{#each dataSources.sources}}
                        '{{this.id}}': 'https://passport.datavillage.me/img/logo/{{this.id}}.png',
                        {{/each}}
                    },
                    colors:[
                        '#79d0dc', // datavillage
                        {{#each dataSources.sources}}
                        '#FFFFFF',
                        {{/each}}
                    ],
                    minCollision: 60,
                    neo4jDataUrl: '/auth/consents/privacyCenter/graph',
                    nodeRadius: 30,
                    zoomFit: false
                });
            }

            window.onload = init;
</script>
